<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Bookstore</title>
  <script src="socket.io/socket.io.js"></script>
  <script>
    window.onload = function () {
      var text = document.getElementById("output");
      text.value = "";
      var socket = io.connect();
      socket.on('serverData', function (data) {
        if (data == 'Invalid\n') {
          alert("操作失败！");
        } else {
          alert("操作成功！");
          text.value += data;
        }
      });
    }
  </script>
</head>

<body>
  <h1>Garbage的会员制书店
    <style>
      h1 {
        text-align: center;
        font-family: "仿宋", Times, serif;
        font-size: 50px;
        color: #df3939;
      }
    </style>
  </h1>
  <input type="button" , name="register" , value="注册" , onclick="register()">
  <script>
    function register() {
      txt1 = prompt("请输入用户名");
      txt2 = prompt("请输入密码");
      txt3 = prompt("请输入用户昵称");
      var res = "register " + txt1 + " " + txt2 + " " + txt3;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="login" , value="登录" , onclick="login()">
  <script>
    function login() {
      txt1 = prompt("请输入用户名");
      txt2 = prompt("请输入密码");
      var res = "su " + txt1 + " " + txt2;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="logout" , value="登出" , onclick="logout()">
  <script>
    function logout() {
      var res = "logout";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="passwd" , value="修改密码" , onclick="passwd()">
  <script>
    function passwd() {
      txt1 = prompt("请输入用户名");
      txt2 = prompt("请输入旧密码(高权限可省略)");
      txt3 = prompt("请输入新密码");
      var res = "passwd " + txt1 + " " + txt2 + " " + txt3;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="add" , value="添加账户" , onclick="useradd()">
  <script>
    function useradd() {
      txt1 = prompt("请输入用户名");
      txt2 = prompt("请输入密码");
      txt3 = prompt("请输入用户权限(顾客输入1，店员输入3)");
      txt4 = prompt("请输入用户昵称");
      var res = "useradd " + txt1 + " " + txt2 + " " + txt3 + " " + txt4;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="delete" , value="删除账户" , onclick="del()">
  <script>
    function del() {
      txt1 = prompt("请输入用户名");
      var res = "delete " + txt1;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="show" , value="搜索全部书籍" , onclick="showall()">
  <script>
    function showall() {
      var res = "show";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showISBN" , value="搜索ISBN" , onclick="show()">
  <script>
    function show() {
      txt1 = prompt("请输入书籍ISBN");
      var res = "show -ISBN=" + txt1;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showname" , value="搜索书名" , onclick="showname()">
  <script>
    function showname() {
      txt1 = prompt("请输入书籍书名");
      var res = "show -name=\"" + txt1 + '\"';
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showauthor" , value="搜索作者" , onclick="showauthor()">
  <script>
    function showauthor() {
      txt1 = prompt("请输入书籍作者");
      var res = "show -author=\"" + txt1 + '\"';
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showkeyword" , value="搜索关键字" , onclick="showkeyword()">
  <script>
    function showkeyword() {
      txt1 = prompt("请输入书籍关键字");
      var res = "show -keyword=\"" + txt1 + '\"';
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="modify" , value="修改书籍信息" , onclick="modify()">
  <script>
    function modify() {
      txt1 = prompt("请输入书籍ISBN");
      txt2 = prompt("请输入书籍书名");
      txt3 = prompt("请输入书籍作者");
      txt4 = prompt("请输入书籍关键字，请以\"|\"分隔不同关键词。");
      txt5 = prompt("请输入书籍价格");
      var res = "modify";
      if (txt1 != null) {
        res += " -ISBN=" + txt1;
      }
      if (txt2 != null) {
        res += " -name=\"" + txt2 + "\"";
      }
      if (txt3 != null) {
        res += " -author=\"" + txt3 + "\"";
      }
      if (txt4 != null) {
        res += " -keyword=\"" + txt4 + "\"";
      }
      if (txt5 != null) {
        res += " -price=" + txt5;
      }
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="select" , value="选中书籍" , onclick="select_()">
  <script>
    function select_() {
      var res = "select " + ISBN;
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="import" , value="书籍进货" , onclick="import_()">
  <script>
    function import_() {
      txt1 = prompt("请输入进货数量");
      txt2 = prompt("请输入进货价格");
      var res = "import " + txt1 + " " + txt2;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script> 
  <input type="button" , name="buy" , value="购买书籍" , onclick="buy()">
  <script>
    function buy() {
      txt1 = prompt("请输入购买书籍的ISBN");
      txt2 = prompt("请输入购买数量");
      var res = "buy " + txt1 + " " + txt2;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="finace" , value="显示收支" , onclick="showfinance()">
  <script>
    function showfinance() {
      var res = "show finance ";
      txt1 = prompt("请输入欲查看的操作笔数。留空查看全部交易收支情况。");
      var socket = io.connect();
      socket.emit('clientdata', res + txt1);
    }
  </script>
  <input type="button" , name="log" , value="显示日志" , onclick="log()">
  <script>
    function log() {
      var res = "log";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="employee" , value="员工报表" , onclick="employee()">
  <script>
    function employee() {
      var res = "report employee";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="finace_report" , value="财政报表" , onclick="finance()">
  <script>
    function finance() {
      var res = "report finance";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="reset" , value="清除输出" , onclick="cleartext()">
  <script>
    function cleartext() {
      var text = document.getElementById("output");
      text.value = "";
    }
  </script>
  <input type="text" , name="txt1" , id="txt1" , width="60">
  <input type="password" , name="txt2" , id="txt2" , width="60">
  <input type="password" , name="txt3" , id="txt3" , width="60">
  <input type="text" , name="txt4" , id="txt4" , width="60">
  <input type="text" , name="txt5" , id="txt5" , width="60">
  <input type="text" , name="txt6" , id="txt6" , width="60">
  <input type="text" , name="txt7" , id="txt7" , width="60">
  <div class="output">
    <textarea id="output" rows="2000" cols="200">
    </textarea>
</body>

</html>