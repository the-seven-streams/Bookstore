<!DOCTYPE html>
<html>
  
<head>
  <meta charset="utf-8">
  <title>Bookstore</title>
  <script src="socket.io/socket.io.js"></script>
  <script>
    window.onload = function () {
      var total = 0;
      var text = document.getElementById("output");
      text.value = "";
      var socket = io.connect();
      socket.on('serverData', function (data) {
        if (data == 'Invalid\n') {
          total++;
          if(total <= 2) {
            alert("操作失败！");
          } else {
            var res="";
            for(var i = 0; i < total; i++) {
              res+="杀"
            }
            res+="!";
            alert(res);
          }
        } else {
          alert("操作成功！");
          text.value += data;
        }
        var txt1 = document.getElementById("txt1");
        var txt2 = document.getElementById("txt2");
        var txt3 = document.getElementById("txt3");
        var txt4 = document.getElementById("txt4");
        var txt5 = document.getElementById("txt5");
        var txt6 = document.getElementById("txt6");
        var txt7 = document.getElementById("txt7");
        var txt8 = document.getElementById("txt8");
        var txt9 = document.getElementById("txt9");
        var txt10 = document.getElementById("txt10");
        var txt11 = document.getElementById("txt11");
        var txt12 = document.getElementById("txt12");
        var txt13 = document.getElementById("txt13");
        txt1.value = "";
        txt2.value = "";
        txt3.value = "";
        txt4.value = "";
        txt5.value = "";
        txt6.value = "";
        txt7.value = "";
        txt8.value = "";
        txt9.value = "";
        txt10.value = "";
        txt11.value = "";
        txt12.value = "";
        txt13.value = "";
      });
    }
  </script>
</head>

<body>
  <h1>Garbage的会员制书店
    <style>
      h1 {
        text-align: center;
        font-family: "仿宋", Times, serif;
        font-size: 50px;
        color: #df3939;
      }
    </style>
  </h1>
  <h2>
    天生万物以养人，人无一物以报天。
    <style>
      h2 {
        text-align: center;
        font-family: "楷体";
        font-size: 50px;
        color: azure;
      }
    </style>
  </h2>
  <input type="button" , name="register" , value="注册" , onclick="register()">
  <script>
    function register() {
      var res = "register " + txt1.value + " " + txt2.value + " " + txt4.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
    };
  </script>
  <input type="button" , name="login" , value="登录" , onclick="login()">
  <script>
    function login() {
      var res = "su " + txt1.value + " " + txt2.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="logout" , value="登出" , onclick="logout()">
  <script>
    function logout() {
      var res = "logout";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="passwd" , value="修改密码" , onclick="passwd()">
  <script>
    function passwd() {
      var res = "passwd " + txt1.value + " " + txt2.value + " " + txt3.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
      removeEventListener("submit", function () { });
    };
  </script>
  <input type="button" , name="add" , value="添加账户" , onclick="useradd()">
  <script>
    function useradd() {
      addEventListener("submit", function () {
        var res = "useradd " + txt1.value + " " + txt3.value + " " + txt12.value
         + " " + txt4.value;
        var socket = io.connect();
        socket.emit('clientdata', res);
      });
    }
  </script>
  <input type="button" , name="delete" , value="删除账户" , onclick="del()">
  <script>
    function del() {
      var res = "delete " + txt1.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="show" , value="搜索全部书籍" , onclick="showall()">
  <script>
    function showall() {
      var res = "show";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showISBN" , value="搜索ISBN" , onclick="show()">
  <script>
    function show() {
      var res = "show -ISBN=" + txt5.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showname" , value="搜索书名" , onclick="showname()">
  <script>
    function showname() {
      var res = "show -name=\"" + txt6.value + '\"';
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showauthor" , value="搜索作者" , onclick="showauthor()">
  <script>
    function showauthor() {
      var res = "show -author=\"" + txt7.value + '\"';
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="showkeyword" , value="搜索关键字" , onclick="showkeyword()">
  <script>
    function showkeyword() {
      var res = "show -keyword=\"" + txt8.value + '\"';
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="modify" , value="修改书籍信息" , onclick="modify()">
  <script>
    function modify() {
      var res = "modify";
      if (txt5.value != "") {
        res += " -ISBN=" + txt5.value;
      }
      if (txt6.value != "") {
        res += " -name=\"" + txt6.value + "\"";
      }
      if (txt7.value != "") {
        res += " -author=\"" + txt7.value + "\"";
      }
      if (txt8.value != "") {
        res += " -keyword=\"" + txt8.value + "\"";
      }
      if (txt9.value != "") {
        res += " -price=" + txt9.value;
      }
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="select" , value="选中书籍" , onclick="select_()">
  <script>
    function select_() {
      var res = "select " + txt5.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="import" , value="书籍进货" , onclick="import_()">
  <script>
    function import_() {
      var res = "import " + txt10.value + " " + txt11.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="buy" , value="购买书籍" , onclick="buy()">
  <script>
    function buy() {
      var res = "buy " + txt5.value + " " + txt10.value;
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="finace" , value="显示收支" , onclick="showfinance()">
  <script>
    function showfinance() {
      var res = "show finance ";
      var socket = io.connect();
      socket.emit('clientdata', res + txt13.value);
    }
  </script>
  <input type="button" , name="log" , value="显示日志" , onclick="log()">
  <script>
    function log() {
      var res = "log";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="employee" , value="员工报表" , onclick="employee()">
  <script>
    function employee() {
      var res = "report employee";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="finace_report" , value="财政报表" , onclick="finance()">
  <script>
    function finance() {
      var res = "report finance";
      var socket = io.connect();
      socket.emit('clientdata', res);
    }
  </script>
  <input type="button" , name="reset" , value="清空输出" , onclick="cleartext()">
  <script>
    function cleartext() {
      var text = document.getElementById("output");
      text.value = "";
    }
  </script>
  <br>
  <input type="text" , name="txt1" , id="txt1" , width="60" , placeholder="请输入账户名">
  <input type="password" , name="txt2" , id="txt2" , width="60" , placeholder="请输入密码">
  <input type="password" , name="txt3" , id="txt3" , width="60" , placeholder="请输入新密码">
  <input type="text" , name="txt4" , id="txt4" , width="60" , placeholder="请输入用户昵称">
  <input type="text" , name="txt5" , id="txt5" , width="60" , placeholder="请输入书籍ISBN">
  <input type="text" , name="txt6" , id="txt6" , width="60" , placeholder="请输入书籍名称">
  <input type="text" , name="txt7" , id="txt7" , width="60" , placeholder="请输入书籍作者">
  <input type="text" , name="txt8" , id="txt8" , width="60" , placeholder="请输入书籍关键字">
  <input type="text" , name="txt9" , id="txt9" , width="60" , placeholder="请输入书籍价格">
  <input type="text" , name="txt10" , id="txt10" , width="60" , placeholder="请输入进货/购买数量">
  <input type="text" , name="txt11" , id="txt11" , width="60" , placeholder="请输入进货价格">
  <input type="text" , name="txt12" , id="txt12" , width="60" , placeholder="请输入用户权限">
  <input type="text" , name="txt13" , id="txt13" , width="60" , placeholder="请输入待查看交易笔数">
  </script>
  <div class="output">
    <textarea id="output" rows="2000" cols="200">
    </textarea>
</body>

</html>