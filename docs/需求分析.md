# 需求分析

## 书店基本流程示意图![](L:\桌面\2023.12.7\书籍.png)

## 数据流

图书信息：ISBN号（20个字符）、书名（60个字符）、作者（60个字符）、关键字（可以为多个，不超过60个字符）、库存量（整型）、单价（非负实数）、进货价格（非负实数）。

账户信息：账户类型（枚举量），账户密码，账户登录状态。

操作信息：每一次操作的类型、操作人、操作内容。

商店信息：存储店家的支出和收入。

## 文件流

图书信息：按照ISBN号排序并分块存储。

操作信息：将所有的操作信息按顺序记录储存在另外一个文件中。

账户信息：将所有的账户信息存储在另外一个文件中。

# 性能分析

考虑在一般的书店系统中，不会有超过100个账户，一般不会有超过1e7本书。

在内部实现中，使用了块状链表结构。在我的底层逻辑中，最高可以支持1010*1000=1010000本书的存储。由于使用了块状链表结构，所以在以ISBN号为查询依据的时间复杂度是O$(\sqrt n)$。

当按照作者等进行查询时，可以参考前者，以作者名等为主键，ISBN号为副键建立块状链表。此时的查询复杂度均是O$(\sqrt n)$级别。

登录等使用栈结构，登出复杂度为O(1)。在登录账号时，依旧存在账号的查询问题。考虑到账号数目不会很多，可以直接使用O(n)的朴素查找算法。

# 成本要求

考虑到这次大作业并不会给助教和写代码的程序员报酬。所以没有成本要求。

# 时间要求

因为这次数据内容都需要存储在文件中，所以需要尽量减少外存的读写。尽量保证每一条记录的延迟不超过0.01s。
